# 機能仕様書 - TrainerDesk

## 1. 概要

TrainerDeskは、パーソナルトレーナーとトレーニー（クライアント）を繋ぐモバイルアプリケーションです。予約管理、トレーニング内容の記録、食事管理、チャット機能を提供します。

### 1.1 対象プラットフォーム
- iOS
- Android

### 1.2 ユーザー種別
| ユーザー種別 | 説明 |
|------------|------|
| トレーナー | パーソナルトレーニングを提供する側 |
| トレーニー | パーソナルトレーニングを受ける側 |

**※ 1人のユーザーが両方の役割を持つことが可能です**（例：トレーナーが別のトレーナーに習う場合）

---

## 2. 認証機能

### 2.1 Googleログイン
- Google OAuth 2.0を使用した認証
- 初回ログイン時にユーザー種別を選択（複数選択可）
  - トレーナーのみ
  - トレーニーのみ
  - 両方（トレーナー兼トレーニー）
- プロフィール情報（名前、メールアドレス、プロフィール画像）はGoogleアカウントから取得

### 2.2 セッション管理
- ログイン状態の永続化
- 自動ログイン機能
- ログアウト機能

### 2.3 役割切り替え
- 両方の役割を持つユーザーは、アクティブな役割を切り替え可能
- **ヘッダーのアイコン/ドロップダウンから即座に切り替え**
- 切り替え後は対応する機能・画面に遷移

**ユースケース例:**
- トレーナーが別のトレーナーに習う（トレーニーとして予約・受講）
- トレーナーが自分自身のトレーニングや食事を記録（セルフマネジメント）

---

## 3. トレーナー向け機能

### 3.1 プロフィール管理
- 自己紹介文の編集
- 専門分野・資格の登録
- 営業時間の設定
- 料金プランの設定
- プロフィール画像の変更

### 3.2 予約管理
- 予約一覧表示（日別/週別/月別ビュー）
- 予約の承認・拒否
- 予約のキャンセル
- 空き時間の設定
- 定休日の設定
- 予約リマインダー通知

### 3.3 クライアント（トレーニー）管理
- クライアント一覧表示
- クライアント招待（招待コード/リンク生成）
- クライアント情報の閲覧
- クライアントとの紐付け解除

### 3.4 トレーニング管理
- トレーニングメニューの作成・編集・削除
- セッションごとのトレーニング記録
  - 実施したエクササイズ
  - セット数・回数・重量
  - トレーニング時間
  - メモ・コメント
- トレーニング履歴の閲覧
- テンプレートメニューの作成

### 3.5 食事管理（クライアント側）
- クライアントの食事記録の閲覧
- 食事へのフィードバック・アドバイス
- 栄養バランスの確認

### 3.6 チャット機能
- クライアントとの1対1チャット
- 画像送信機能
- 既読機能
- プッシュ通知

---

## 4. トレーニー向け機能

### 4.1 プロフィール管理
- 基本情報の編集
  - 身長・体重
  - 目標（ダイエット、筋力アップなど）
  - 既往歴・注意事項
- プロフィール画像の変更

### 4.2 トレーナー連携
- トレーナーとの紐付け（招待コード/リンク入力）
- 紐付けトレーナーの確認
- トレーナーとの紐付け解除

### 4.3 予約管理
- トレーナーの空き時間確認
- 予約の申し込み
- 予約一覧表示
- 予約のキャンセル
- 予約リマインダー通知

### 4.4 トレーニング記録閲覧
- 過去のトレーニング記録の閲覧
- トレーニング履歴のグラフ表示
- 進捗の確認

### 4.5 食事管理
- 食事の記録
  - 食事写真のアップロード
  - 食事内容のテキスト入力
  - 食事時間の記録
  - 食事カテゴリ（朝食/昼食/夕食/間食）
- 食事履歴の閲覧
- カロリー・栄養素の概算表示（任意入力）
- トレーナーからのフィードバック確認

### 4.6 チャット機能
- トレーナーとの1対1チャット
- 画像送信機能
- 既読機能
- プッシュ通知

---

## 5. 共通機能

### 5.1 ダッシュボード
- 今日の予約表示
- 未読メッセージ数表示
- 最新の通知表示

### 5.2 通知機能
- プッシュ通知
  - 予約リマインダー
  - 予約ステータス変更
  - 新着メッセージ
  - 食事記録へのフィードバック
- アプリ内通知一覧

### 5.3 設定
- 役割の追加（トレーナー/トレーニーを後から追加可能）
- 通知設定のON/OFF
- アカウント削除
- 利用規約・プライバシーポリシーの確認
- お問い合わせ

---

## 6. 画面一覧

### 6.1 共通画面
| 画面名 | 説明 |
|--------|------|
| スプラッシュ画面 | アプリ起動時の初期画面 |
| ログイン画面 | Googleログインボタン表示 |
| ユーザー種別選択画面 | トレーナー/トレーニー選択（複数可） |
| ダッシュボード | ホーム画面 |
| 通知一覧画面 | 通知履歴の表示 |
| 設定画面 | 各種設定 |
| チャット一覧画面 | チャットルーム一覧 |
| チャット画面 | 1対1のチャット |

### 6.2 トレーナー専用画面
| 画面名 | 説明 |
|--------|------|
| トレーナープロフィール編集画面 | 自己紹介・資格等の編集 |
| 予約管理画面 | カレンダー形式で予約表示 |
| 予約詳細画面 | 予約の詳細と操作 |
| スケジュール設定画面 | 空き時間・定休日設定 |
| クライアント一覧画面 | 担当クライアント一覧 |
| クライアント詳細画面 | クライアント情報詳細 |
| クライアント招待画面 | 招待コード/リンク生成 |
| トレーニングメニュー一覧画面 | メニューテンプレート管理 |
| トレーニングメニュー編集画面 | メニューの作成・編集 |
| セッション記録画面 | トレーニング実施記録 |
| クライアント食事一覧画面 | クライアントの食事記録閲覧 |

### 6.3 トレーニー専用画面
| 画面名 | 説明 |
|--------|------|
| トレーニープロフィール編集画面 | 基本情報の編集 |
| トレーナー連携画面 | 招待コード入力 |
| 予約申込画面 | 空き時間選択・予約 |
| 予約一覧画面 | 自分の予約一覧 |
| トレーニング履歴画面 | 過去のトレーニング記録 |
| トレーニング詳細画面 | セッションの詳細 |
| 食事記録画面 | 食事の入力 |
| 食事履歴画面 | 過去の食事記録一覧 |
| 食事詳細画面 | 食事記録の詳細 |

---

## 7. 非機能要件

### 7.1 パフォーマンス
- アプリ起動時間: 3秒以内
- 画面遷移: 1秒以内
- API応答時間: 2秒以内

### 7.2 セキュリティ
- 通信の暗号化（HTTPS）
- 認証トークンの安全な管理
- 個人情報の適切な取り扱い

### 7.3 可用性
- オフライン時の基本操作対応（データはオンライン復帰時に同期）

### 7.4 対応言語
- 日本語

### 7.5 対応OS
- iOS 15.0以上
- Android 8.0（API Level 26）以上
